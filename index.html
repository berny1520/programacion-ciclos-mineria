
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Programación de Ciclos Mineros - Mejorado</title>
    <style>
        body { font-family: Arial, sans-serif; background-color: #f4f6f8; color: #333; margin: 0; padding: 20px; }
        h1, h2 { color: #004080; }
        form { background: #ffffff; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        label { display: block; margin: 10px 0 5px; }
        input { padding: 5px; width: 200px; }
        button { margin-top: 10px; padding: 8px 16px; background-color: #004080; color: white; border: none; border-radius: 5px; cursor: pointer; }
        table { width: 100%; margin-top: 20px; border-collapse: collapse; background: #fff; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
        th { background-color: #e6f0ff; }
        .barra { height: 20px; margin-right: 2px; display: inline-block; vertical-align: middle; position: relative; }
        .barra span { position: absolute; left: 5px; top: 2px; font-size: 10px; color: white; }
        .perforacion { background: #0074D9; }
        .disparo { background: #FF4136; }
        .ventilacion { background: #AAAAAA; }
        .extraccion { background: #2ECC40; }
        .proyeccion { background: #FF851B; }
        .acunadura { background: #B10DC9; }
        .leyenda { margin-top: 15px; }
        .leyenda span { margin-right: 15px; display: inline-block; }
        .leyenda .cuadro { width: 12px; height: 12px; display: inline-block; margin-right: 5px; vertical-align: middle; }
        .filaGantt { margin-top: 10px; }
        .contenedorGantt { background: #fff; padding: 20px; border-radius: 10px; margin-top: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    </style>
</head>
<body>
    <h1>Programación de Ciclos Mineros</h1>

    <form id="formFrente">
        <label>Nombre del Frente: <input type="text" id="frente" required></label>
        <label>Largo a Perforar (m): <input type="number" id="largo" required></label>
        <label>Duración Perforación (min/m): <input type="number" id="perforacion" required></label>
        <label>Duración Disparo (min): <input type="number" id="disparo" required></label>
        <label>Ventilación (min): <input type="number" id="ventilacion" required></label>
        <label>Extracción (min/m): <input type="number" id="extraccion" required></label>
        <label>Proyección (min): <input type="number" id="proyeccion" required></label>
        <label>Acuñadura (min): <input type="number" id="acunadura" required></label>
        <button type="submit">Agregar Frente</button>
    </form>

    <h2>Programación por Frente</h2>
    <table id="tablaResultados">
        <tr>
            <th>Frente</th>
            <th>Largo (m)</th>
            <th>Perforación Total</th>
            <th>Extracción Total</th>
            <th>Duración Total (min)</th>
            <th>Duración Total (hr)</th>
        </tr>
    </table>

    <button onclick="mostrarGantt()">Ver gráfico Gantt</button>
    <div class="contenedorGantt" id="contenedorGantt" style="display:none;"></div>

    <div class="leyenda">
        <strong>Leyenda:</strong>
        <span><span class="cuadro" style="background:#0074D9;"></span> Perforación</span>
        <span><span class="cuadro" style="background:#FF4136;"></span> Disparo</span>
        <span><span class="cuadro" style="background:#AAAAAA;"></span> Ventilación</span>
        <span><span class="cuadro" style="background:#2ECC40;"></span> Extracción</span>
        <span><span class="cuadro" style="background:#FF851B;"></span> Proyección</span>
        <span><span class="cuadro" style="background:#B10DC9;"></span> Acuñadura</span>
    </div>

    <script>
        const frentes = [];

        document.getElementById('formFrente').addEventListener('submit', function(e) {
            e.preventDefault();
            const frente = document.getElementById('frente').value;
            const largo = parseFloat(document.getElementById('largo').value);
            const perfMin = parseFloat(document.getElementById('perforacion').value);
            const disparo = parseFloat(document.getElementById('disparo').value);
            const vent = parseFloat(document.getElementById('ventilacion').value);
            const extMin = parseFloat(document.getElementById('extraccion').value);
            const proy = parseFloat(document.getElementById('proyeccion').value);
            const acun = parseFloat(document.getElementById('acunadura').value);

            const perfTotal = perfMin * largo;
            const extTotal = extMin * largo;
            const totalMin = perfTotal + disparo + vent + extTotal + proy + acun;
            const totalHr = (totalMin / 60).toFixed(2);

            frentes.push({ frente, largo, perfTotal, disparo, vent, extTotal, proy, acun, totalMin, totalHr });

            const tabla = document.getElementById('tablaResultados');
            const fila = tabla.insertRow(-1);
            fila.innerHTML = `<td>${frente}</td><td>${largo}</td><td>${perfTotal}</td><td>${extTotal}</td><td>${totalMin}</td><td>${totalHr}</td>`;

            document.getElementById('formFrente').reset();
        });

        function mostrarGantt() {
            const contenedor = document.getElementById('contenedorGantt');
            contenedor.innerHTML = "";
            contenedor.style.display = 'block';

            frentes.forEach(f => {
                const fila = document.createElement('div');
                fila.className = 'filaGantt';
                fila.innerHTML = `<strong>${f.frente}</strong><br>` +
                    crearBarra("perforacion", f.perfTotal) +
                    crearBarra("disparo", f.disparo) +
                    crearBarra("ventilacion", f.vent) +
                    crearBarra("extraccion", f.extTotal) +
                    crearBarra("proyeccion", f.proy) +
                    crearBarra("acunadura", f.acun);
                contenedor.appendChild(fila);
            });
        }

        function crearBarra(tipo, valor) {
            const horas = (valor / 60).toFixed(1);
            return `<span class='barra ${tipo}' style='width:${valor}px'><span>${horas}h</span></span>`;
        }
    </script>
</body>
</html>
